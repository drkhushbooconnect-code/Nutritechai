
<html>
<head><title>AI Recipe Platform Code</title></head>
<body>
<h1>AI Recipe Platform - Consolidated Code</h1>

<h2>Backend - server.js</h2>
<pre>
import express from "express";
import mongoose from "mongoose";
import cors from "cors";
import dotenv from "dotenv";

dotenv.config();
const app = express();
app.use(cors());
app.use(express.json());

mongoose.connect(process.env.MONGO_URI, {
  useNewUrlParser: true,
  useUnifiedTopology: true
}).then(() => console.log("MongoDB connected"))
  .catch(err => console.log(err));

app.get("/", (req, res) => res.send("Backend is working"));

app.listen(process.env.PORT || 5000, () =>
  console.log(`Server running on port ${process.env.PORT || 5000}`)
);
</pre>

<h2>Backend - .env example</h2>
<pre>
MONGO_URI=your_mongodb_connection_string
OPENAI_KEY=your_openai_api_key
PORT=5000
</pre>

<h2>Backend - Recipe.js</h2>
<pre>
const mongoose = require('mongoose');

const recipeSchema = new mongoose.Schema({
  title: String,
  ingredients: [String],
  instructions: String,
  image: String,
});

module.exports = mongoose.model('Recipe', recipeSchema);
</pre>

<h2>Backend - MealPlan.js</h2>
<pre>
const mongoose = require('mongoose');

const mealPlanSchema = new mongoose.Schema({
  week: Number,
  meals: [{
    day: String,
    recipe: { type: mongoose.Schema.Types.ObjectId, ref: 'Recipe' },
  }],
});

module.exports = mongoose.model('MealPlan', mealPlanSchema);
</pre>

<h2>Frontend - App.js</h2>
<pre>
import React from 'react';
import RecipeGenerator from './components/RecipeGenerator';
import MealPlanner from './components/MealPlanner';

const App = () => (
  <div>
    <h1>AI Recipe Platform</h1>
    <RecipeGenerator />
    <MealPlanner />
  </div>
);

export default App;
</pre>

<h2>Frontend - RecipeGenerator.js</h2>
<pre>
import React, { useState } from 'react';
import axios from 'axios';

const RecipeGenerator = () => {
  const [ingredients, setIngredients] = useState('');
  const [recipe, setRecipe] = useState(null);

  const generateRecipe = async () => {
    try {
      const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/generate-recipe`, { ingredients });
      setRecipe(response.data);
    } catch (error) {
      console.error(error);
    }
  };

  return (
    <div>
      <input
        type="text"
        value={ingredients}
        onChange={(e) => setIngredients(e.target.value)}
        placeholder="Enter ingredients"
      />
      <button onClick={generateRecipe}>Generate Recipe</button>
      {recipe && (
        <div>
          <h2>{recipe.title}</h2>
          <p>{recipe.instructions}</p>
          <img src={recipe.image} alt={recipe.title} />
        </div>
      )}
    </div>
  );
};

export default RecipeGenerator;
</pre>

<h2>Frontend - MealPlanner.js</h2>
<pre>
import React, { useState } from 'react';
import axios from 'axios';

const MealPlanner = () => {
  const [week, setWeek] = useState(1);
  const [mealPlan, setMealPlan] = useState(null);

  const generateMealPlan = async () => {
    try {
      const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/generate-meal-plan`, { week });
      setMealPlan(response.data);
    } catch (error) {
      console.error(error);
    }
  };

  return (
    <div>
      <input
        type="number"
        value={week}
        onChange={(e) => setWeek(e.target.value)}
        placeholder="Enter week number"
      />
      <button onClick={generateMealPlan}>Generate Meal Plan</button>
      {mealPlan && (
        <div>
          <h2>Week {mealPlan.week}</h2>
          <ul>
            {mealPlan.meals.map((meal, index) => (
              <li key={index}>
                {meal.day}: {meal.recipe.title}
              </li>
            ))}
          </ul>
        </div>
      )}
    </div>
  );
};

export default MealPlanner;
</pre>

<h2>Frontend - api.js</h2>
<pre>
import axios from 'axios';

const api = axios.create({
  baseURL: process.env.REACT_APP_BACKEND_URL,
});

export default api;
</pre>

<h2>Frontend - .env example</h2>
<pre>
REACT_APP_BACKEND_URL=http://localhost:5000
REACT_APP_OPENAI_KEY=your_openai_api_key
</pre>

</body>
</html>
